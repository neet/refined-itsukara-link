scalar Date

enum Order {
  ASC
  DESC
}

interface Node {
  id: ID!
}

type PageInfo {
  # Whether or not there are next pages
  hasNextPage: Boolean!
  # Whether or not there are previous pages
  hasPreviousPage: Boolean!
  # Total count
  totalCount: Int
}

type Activity implements Node {
  # ID of the activity
  id: ID!
  # Name of the activity
  name: String!
  # Description of the streaming
  description: String!
  # Whether public
  public: Int!
  # URL of the activity
  url: String!
  # Thumbnail of the activity
  thumbnail: String!
  # Start date time on ISO 8601
  startAt: Date!
  # End date time on ISO 8601
  endAt: Date!
  # Created date time
  createdAt: Date!
  # Updated date time
  updatedAt: Date!
  # Sources of the activity
  performers: [Performer!]!
  # Associated category
  category: Category
  # Matched team
  team: Team
}

type ActivityConnection {
  nodes: [Activity!]!
  pageInfo: PageInfo!
}

type Performer implements Node {
  # ID of the performer
  id: ID!
  # Name of the performer
  name: String!
  # Romanized name of the performer
  latinName: String!
  # Ruby for name of the performer
  ruby: String!
  # URL of the avatar for the performer
  avatar: String!
  # URL of the full-body image for the performer
  fullBody: String!
  # Hex colour code
  color: String!
  # Description of the performer
  description: String!
  # If the  performer is public
  public: Int!
  # Unknown...
  position: Int
  # Created date time
  createdAt: Date!
  # Updated date time
  updatedAt: Date!
  # External services' information
  socialAccounts: [SocialAccount!]!
  # Involved teams
  teams: [Team!]!
  # Activities
  activities: ActivityConnection!
}

type PerformerConnection {
  nodes: [Performer!]!
  pageInfo: PageInfo!
}

type Team implements Node {
  # ID of the team
  id: ID!
  # Name of the team
  name: String!
  # Created date time
  createdAt: Date!
  # Updated date time
  updatedAt: Date!
  # Involved performers
  members: [Performer!]!
  # Activities
  activities: ActivityConnection!
}

type TeamConnection {
  nodes: [Team!]!
  pageInfo: PageInfo!
}

type Category implements Node {
  # ID of the category
  id: ID!
  # name
  name: String!
  # Activities
  activities(
    limit: Int
    offset: Int
    order: Order
    performerId: ID
    teamId: ID
    afterDate: Date
    beforeDate: Date
  ): ActivityConnection!
}

type CategoryConnection {
  nodes: [Category!]!
  pageInfo: PageInfo!
}

interface SocialAccount {
  # Internal ID of the channel
  id: ID!
  # Created date time
  createdAt: Date!
  # Updated date time
  updatedAt: Date!
}

type YoutubeAccount implements Node & SocialAccount {
  # Internal ID of the channel
  id: ID!
  # ID of the channel
  channelId: ID!
  # Name of the channel
  channelName: String!
  # Order of creation
  creationOrder: Int!
  # Created date time
  createdAt: Date!
  # Updated date time
  updatedAt: Date!
}

type TwitterAccount implements Node & SocialAccount {
  # Internal ID of the channel
  id: ID!
  # Screenname of the account like @twitter
  screenName: String!
  # Created date time
  createdAt: Date!
  # Updated date time
  updatedAt: Date!
}

type SearchResult {
  performers: [Performer!]!
  activities: [Activity!]!
  teams: [Team!]!
  categories: [Category!]!
}

type Query {
  # Search performers, activities, teams and categories
  search(query: String!): SearchResult!
  # Fetch single activity
  activity(id: ID!): Activity
  # Fetch activities
  activities(
    limit: Int
    offset: Int
    order: Order
    performerId: ID
    teamId: ID
    categoryId: ID
    afterDate: Date
    beforeDate: Date
  ): ActivityConnection!
  # Fetch single performer
  performer(id: ID!): Performer
  # Fetch performers
  performers(limit: Int, offset: Int, order: Order): PerformerConnection!
  # Fetch single category
  category(id: ID!): Category
  # Fetch categories
  categories(limit: Int, offset: Int, order: Order): CategoryConnection!
  # Fetch single team
  team(id: ID!): Team
  # Fetch teams
  teams(limit: Int, offset: Int, order: Order, performerId: ID): TeamConnection!
}

schema {
  query: Query
}
